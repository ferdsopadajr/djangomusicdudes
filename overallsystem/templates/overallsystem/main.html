{% extends 'overallsystem/layout.html' %}
{% block sidebar %}
<!-- Sidebar -->
<div id="sidebar-wrapper">
	<ul class="sidebar-nav">
		<li class="sidebar-brand">
			<a href="/">Music<span>Dudes</span></a>
		</li>
		<li class="active">
			<a href="#browse"><i class="fas fa-home"></i>Browse</a>
		</li>
		<li>
			<a href="#playlists"><i class="fas fa-folders"></i>Playlists</a>
		</li>
		<li>
			<a href="#favorites"><i class="fas fa-heart"></i>Favorites</a>
		</li>
	</ul>
	<div class="cr_pl">
		<a href="#create_playlist"><i class="far fa-plus-circle"></i>Create Playlist</a>
	</div>
</div>
<!-- Top Bar -->
<div class="top-bar">
	<div class="search">
		<div class="input-group">
			{{ form.search }}
			<div class="input-group-append">
				<i class="input-group-text fal fa-search"></i>
			</div>
		</div>
	</div>
	<div class="btn-group">
		<button class="btn dropdown-toggle fal fa-user-circle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ user.username }}</button>
		<div class="dropdown-menu dropdown-menu-right">
			<a id="account" class="dropdown-item">Account</a>
			<a class="dropdown-item" href="/logout/">Log Out</a>
		</div>
	</div>
</div>
<!-- Controls Bar -->
<div class="controls-bar">
	<div class="controls-bar-left">
		<!-- if profile.pref_mean_x -->
		{% include 'overallsystem/now-playing.html' %}
		<!-- endif -->
	</div>
	<div class="controls-bar-center">
		<div class="player-controls-buttons">
			<button class="fal fa-random" title="Enable shuffle"></button>
			<button class="fal fa-step-backward" title="Previous"></button>
			<button class="fas fa-play" title="Play"></button>
			<button class="fas fa-pause sr-only" title="Pause"></button>
			<button class="fal fa-step-forward" title="Next"></button>
			<button class="fal fa-repeat-alt" title="Enable repeat"></button>
			<button class="fal fa-repeat-1-alt sr-only" title="Disable repeat"></button>
		</div>
		<div class="playback-bar">
			<div class="playback-bar-progress-time">0:18</div>
			<div class="progress">
				<div class="progress-bar" role="progressbar" style="width: 40%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
			</div>
			<div class="playback-bar-progress-time">3:00</div>
		</div>
	</div>
	<div class="controls-bar-right">
		<div class="extra-controls">
			<button class="fal fa-bars" title="Queue"></button>
			<div class="volume-bar">
				<button class="fal fa-volume" aria-label="Mute"></button>
				<div class="progress">
					<div class="progress-bar" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Main View -->
<div class="main-view">
	{% block songs %}
	{% if profile.pref_mean_x %}
		<div class="all-songs">
	{% else %}
		<div class="all-songs full">
	{% endif %}
		<div class="all-songs-title">
			<h5>All Songs</h5>
		</div>
		<div class="songs-container">
			<div class="song-bdr-top">
				<h6>Listens</h6>
				<h6>Ratings</h6>
			</div>
			{% for track in songs %}
			<div class="song" id="{{ track.id }}">
				<button class="fas fa-play" title="Play"></button>
				<button class="fas fa-pause sr-only"></button>
				<div class="song-info">
					<div class="song-info-name">{{ track.track_name }}</div>
					<div class="song-info-artists">{{ track.artists }}</div>
				</div>
				<div class="song-duration">{{ track.duration_ms }}</div>
				<div class="button-add">
					<button class="fal fa-heart" title="Add to Favorites"></button>
					<button class="fas fa-heart sr-only" title="Add to Favorites"></button>
					<button class="fal fa-plus" title="Add to Playlist"></button>
				</div>
				<div class="listens-ratings">
					<div class="listens">00001</div>
					<!-- ratings formula
						ratings = (sum(listenduration)+fvpl) / ((sum(listens)*maxdurationeach)+fvpl)
					 -->
					<div class="ratings">100%</div>
				</div>
			</div>
			{% endfor %}
		</div>
	</div>
	{% if profile.pref_mean_x %}
		<div class="mood-rec">
			<div class="current-mood">
				<div class="mood-sec">
					<h6 class="mood">Current Mood:</h6>
					<div class="heatmap-cont">
						<div class="mood-heatmap"></div>
						<div class="heatpoint" title="Sad"><!-- append value to margin-left attribute coming from cfd-rate; change its title --></div>
					</div>
				</div>
				<div class="cfd-sec">
					<h6 class="cfd-rate">Confidence Rate:</h6>
					<div class="cfd-pct">%<!-- add percentage computation here --></div>
				</div>
			</div>
			<div class="rec">
				<div class="rec-title">
					<h5>Suggested Songs</h5>
				</div>
				<div class="rec-container">
					{% include 'overallsystem/recommendations.html' %}
				</div>
			</div>
		</div>
	{% endif %}
	{% endblock %}
</div>
{% endblock %}